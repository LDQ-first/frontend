<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../style/default.css">
    <link href="https://cdn.bootcss.com/highlight.js/9.12.0/styles/monokai-sublime.min.css" rel="stylesheet">
</head>
<body>
<x-markdown>

# 导航

* [返回Github](https://github.com/LDQ-first/frontend)
* [返回首页](../index.html)



## MVVM 


```



View 视图层

template
html




Module 数据层
data



VM 
连接 View 和 Module 

View 变化 通过 VM 传给 Module 
Module 变化 通过 VM 传给 View







Object.defineProperty()



< !DOCTYPE html >
< html >
< head >
  < meta charset="utf-8" >
  < title >JS Bin< /title >
  < style >
  .red{
    color: red;
  }
  < /style >
< /head >
< body >
  < form  >
    < p >姓名< input type="text" name="name" >
    < p >年龄< input type="number" name="age" >
    < p >爱好< input type="text" name="hobby" >
    < p >< input type="submit" value="提交" >
  < /form >
  < script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js" >< /script >
< /body >
< /html >




var frank = {
  _data: {
    age: 18,
    name: 'frank'
  }
}
for(let key in frank._data){
  Object.defineProperty(frank, key, {
    get: function(){
      console.log('frank.'+key+' 被读取了')
      return frank._data[key]
    },
    set: function(xxx){
      console.log('frank.'+key+' 被设置了')
      $('input[name="'+key+'"]').val(xxx)
      frank._data[key] = xxx
      
    }
  })
}

function createGetAndSet(key, defaultValue){
  
  Object.defineProperty(frank, key, {
    get: function(){
      console.log('frank.'+key+' 被读取了')
      return frank._data[key]
    },
    set: function(xxx){
      console.log('frank.'+key+' 被设置了')
      $('input[name="'+key+'"]').val(xxx)
      frank._data[key] = xxx
      
    }
  })
  frank._data[key] = defaultValue
}




$('form').on('input', 'input[name]', function(e){
  let $input = $(e.currentTarget)
  let name = $input.attr('name')
  let value = $input.val()
  console.log(name, value)
  frank[name] = value
})

createGetAndSet('hobby', 0)

$('input[name="name"]').val(frank.name)
$('input[name="age"]').val(frank.age)
$('input[name="hobby"]').val(frank.hobby)

$('form').on('submit', function(e){
  e.preventDefault()
  console.log(frank)
})
var n = 0
let timer = setInterval(function(){
  frank.name = 'xxxx'
  if(n === 10){
    frank.name = 'frank'
    clearInterval(timer)
  }
  
},10)




```























</x-markdown>
    <script src="https://cdn.bootcss.com/marked/0.3.6/marked.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../js/main.js"></script>
</body>
</html>